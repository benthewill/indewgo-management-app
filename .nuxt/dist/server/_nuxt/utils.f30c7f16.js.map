{"version":3,"file":"utils.f30c7f16.js","sources":["../../../../node_modules/@nuxt/content/dist/runtime/markdown-parser/utils/node.mjs","../../../../node_modules/@nuxt/content/dist/runtime/composables/utils.mjs"],"sourcesContent":["export const TEXT_TAGS = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"li\"];\nexport function isTag(vnode, tag) {\n  if (vnode.type === tag) {\n    return true;\n  }\n  if (typeof vnode.type === \"object\" && vnode.type.tag === tag) {\n    return true;\n  }\n  if (vnode.tag === tag) {\n    return true;\n  }\n  return false;\n}\nexport function isText(vnode) {\n  return isTag(vnode, \"text\") || typeof vnode.children === \"string\";\n}\nexport function nodeChildren(node) {\n  if (Array.isArray(node.children) || typeof node.children === \"string\") {\n    return node.children;\n  }\n  if (typeof node.children.default === \"function\") {\n    return node.children.default();\n  }\n  return [];\n}\nexport function nodeTextContent(node) {\n  if (!node) {\n    return \"\";\n  }\n  if (Array.isArray(node)) {\n    return node.map(nodeTextContent).join(\"\");\n  }\n  if (isText(node)) {\n    return node.children || node.value;\n  }\n  const children = nodeChildren(node);\n  if (Array.isArray(children)) {\n    return children.map(nodeTextContent).join(\"\");\n  }\n  return \"\";\n}\nexport function unwrap(vnode, tags = [\"p\"]) {\n  if (Array.isArray(vnode)) {\n    return vnode.flatMap((node) => unwrap(node, tags));\n  }\n  let result = vnode;\n  if (tags.some((tag) => tag === \"*\" || isTag(vnode, tag))) {\n    result = nodeChildren(vnode) || vnode;\n    if (!Array.isArray(result) && TEXT_TAGS.some((tag) => isTag(vnode, tag))) {\n      result = [result];\n    }\n  }\n  return result;\n}\nexport function flatUnwrap(vnodes, tags = [\"p\"]) {\n  vnodes = Array.isArray(vnodes) ? vnodes : [vnodes];\n  if (!tags.length) {\n    return vnodes;\n  }\n  return vnodes.flatMap((vnode) => flatUnwrap(unwrap(vnode, [tags[0]]), tags.slice(1))).filter((vnode) => !(isText(vnode) && nodeTextContent(vnode).trim() === \"\"));\n}\n","import { withBase } from \"ufo\";\nimport { useRuntimeConfig, useRequestEvent, useCookie, useRoute } from \"#app\";\nimport { unwrap, flatUnwrap } from \"../markdown-parser/utils/node.mjs\";\nexport const withContentBase = (url) => withBase(url, \"/api/\" + useRuntimeConfig().public.content.base);\nexport const useUnwrap = () => ({\n  unwrap,\n  flatUnwrap\n});\nexport const useContentDisabled = () => {\n  console.warn(\"useContent is only accessible when you are using `documentDriven` mode.\");\n  console.warn(\"Learn more by visiting: https://content.nuxtjs.org/guide/writing/document-driven\");\n  throw new Error(\"useContent is only accessible when you are using `documentDriven` mode.\");\n};\nexport const navigationDisabled = () => {\n  console.warn(\"Navigation is only accessible when you enable it in module options.\");\n  console.warn(\"Learn more by visiting: https://content.nuxtjs.org/api/configuration#navigation\");\n  throw new Error(\"Navigation is only accessible when you enable it in module options.\");\n};\nexport const addPrerenderPath = (path) => {\n  const event = useRequestEvent();\n  event.res.setHeader(\n    \"x-nitro-prerender\",\n    [\n      event.res.getHeader(\"x-nitro-prerender\"),\n      path\n    ].filter(Boolean).join(\",\")\n  );\n};\nexport const shouldUseClientDB = () => {\n  const { clientDB } = useRuntimeConfig().content;\n  if (!process.client) {\n    return false;\n  }\n  if (clientDB?.isSPA) {\n    return true;\n  }\n  if (useRoute().query?.preview || useCookie(\"previewToken\").value) {\n    return true;\n  }\n  return false;\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,YAAY,CAAC,KAAK,MAAM,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAChE,SAAS,MAAM,OAAO,KAAK;AAChC,MAAI,MAAM,SAAS,KAAK;AACtB,WAAO;AAAA,EACR;AACD,MAAI,OAAO,MAAM,SAAS,YAAY,MAAM,KAAK,QAAQ,KAAK;AAC5D,WAAO;AAAA,EACR;AACD,MAAI,MAAM,QAAQ,KAAK;AACrB,WAAO;AAAA,EACR;AACD,SAAO;AACT;AACO,SAAS,OAAO,OAAO;AAC5B,SAAO,MAAM,OAAO,MAAM,KAAK,OAAO,MAAM,aAAa;AAC3D;AACO,SAAS,aAAa,MAAM;AACjC,MAAI,MAAM,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,aAAa,UAAU;AACrE,WAAO,KAAK;AAAA,EACb;AACD,MAAI,OAAO,KAAK,SAAS,YAAY,YAAY;AAC/C,WAAO,KAAK,SAAS;EACtB;AACD,SAAO;AACT;AACO,SAAS,gBAAgB,MAAM;AACpC,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACR;AACD,MAAI,MAAM,QAAQ,IAAI,GAAG;AACvB,WAAO,KAAK,IAAI,eAAe,EAAE,KAAK,EAAE;AAAA,EACzC;AACD,MAAI,OAAO,IAAI,GAAG;AAChB,WAAO,KAAK,YAAY,KAAK;AAAA,EAC9B;AACD,QAAM,WAAW,aAAa,IAAI;AAClC,MAAI,MAAM,QAAQ,QAAQ,GAAG;AAC3B,WAAO,SAAS,IAAI,eAAe,EAAE,KAAK,EAAE;AAAA,EAC7C;AACD,SAAO;AACT;AACO,SAAS,OAAO,OAAO,OAAO,CAAC,GAAG,GAAG;AAC1C,MAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,WAAO,MAAM,QAAQ,CAAC,SAAS,OAAO,MAAM,IAAI,CAAC;AAAA,EAClD;AACD,MAAI,SAAS;AACb,MAAI,KAAK,KAAK,CAAC,QAAQ,QAAQ,OAAO,MAAM,OAAO,GAAG,CAAC,GAAG;AACxD,aAAS,aAAa,KAAK,KAAK;AAChC,QAAI,CAAC,MAAM,QAAQ,MAAM,KAAK,UAAU,KAAK,CAAC,QAAQ,MAAM,OAAO,GAAG,CAAC,GAAG;AACxE,eAAS,CAAC,MAAM;AAAA,IACjB;AAAA,EACF;AACD,SAAO;AACT;AACO,SAAS,WAAW,QAAQ,OAAO,CAAC,GAAG,GAAG;AAC/C,WAAS,MAAM,QAAQ,MAAM,IAAI,SAAS,CAAC,MAAM;AACjD,MAAI,CAAC,KAAK,QAAQ;AAChB,WAAO;AAAA,EACR;AACD,SAAO,OAAO,QAAQ,CAAC,UAAU,WAAW,OAAO,OAAO,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,MAAM,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,UAAU,EAAE,OAAO,KAAK,KAAK,gBAAgB,KAAK,EAAE,KAAI,MAAO,GAAG;AAClK;ACzDY,MAAC,kBAAkB,CAAC,QAAQ,SAAS,KAAK,UAAU,mBAAmB,OAAO,QAAQ,IAAI;AAC1F,MAAC,YAAY,OAAO;AAAA,EAC9B;AAAA,EACA;AACF;AACY,MAAC,qBAAqB,MAAM;AACtC,UAAQ,KAAK,yEAAyE;AACtF,UAAQ,KAAK,kFAAkF;AAC/F,QAAM,IAAI,MAAM,yEAAyE;AAC3F;AAMY,MAAC,mBAAmB,CAAC,SAAS;AACxC,QAAM,QAAQ;AACd,QAAM,IAAI;AAAA,IACR;AAAA,IACA;AAAA,MACE,MAAM,IAAI,UAAU,mBAAmB;AAAA,MACvC;AAAA,IACD,EAAC,OAAO,OAAO,EAAE,KAAK,GAAG;AAAA,EAC9B;AACA;AACY,MAAC,oBAAoB,MAAM;AAChB,mBAAkB,EAAC;AACnB;AACnB,WAAO;AAAA,EACR;AAQH;"}